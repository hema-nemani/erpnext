[ERROR] 2021-03-09 15:05:07,561 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "action": "Save",
 "cmd": "frappe.desk.form.save.savedocs",
 "doc": "{\"docstatus\":0,\"doctype\":\"Quotation\",\"name\":\"New Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"naming_series\":\"SAL-QTN-.YYYY.-\",\"quotation_to\":\"Customer\",\"transaction_date\":\"2021-03-11\",\"order_type\":\"Sales\",\"customer_group\":\"All Customer Groups\",\"territory\":\"All Territories\",\"currency\":\"INR\",\"selling_price_list\":\"Indian Rupees\",\"price_list_currency\":\"INR\",\"ignore_pricing_rule\":0,\"apply_discount_on\":\"Grand Total\",\"group_same_items\":0,\"status\":\"Draft\",\"conversion_rate\":1,\"plc_conversion_rate\":1,\"company\":\"BGL Stores\",\"valid_till\":\"2021-04-11\",\"base_net_total\":null,\"net_total\":null,\"base_total\":null,\"total\":null,\"total_qty\":23,\"rounding_adjustment\":null,\"grand_total\":null,\"base_grand_total\":null,\"total_taxes_and_charges\":null,\"base_total_taxes_and_charges\":null,\"base_rounding_adjustment\":null,\"rounded_total\":null,\"base_rounded_total\":null,\"in_words\":\"\",\"base_in_words\":\"\",\"base_discount_amount\":0,\"item_details\":\"CK Ware 001\",\"items\":[{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":1,\"item_code\":\"sam001\",\"item_name\":\"sample\",\"hsn_code\":\"446\",\"qty\":5,\"item_tax_percentage\":\"5%\",\"mrp\":5400,\"image\":\"/files/jos png.png\",\"enter_qty\":\"50\",\"total_amount\":270000,\"net_rate\":5400,\"amount\":27000,\"net_amount\":27000,\"total_weight\":null,\"base_price_list_rate\":5400,\"base_rate\":5400,\"base_amount\":27000,\"base_net_rate\":5400,\"base_net_amount\":27000,\"price_list_rate\":5400,\"child_docname\":\"New Item Quotation 1\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[],\"discount_percentage\":0,\"rate_with_margin\":5400,\"base_rate_with_margin\":5400,\"rate\":5400},{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 3\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":2,\"item_code\":\"CK Ware 001\",\"item_name\":\"cookware\",\"hsn_code\":\"6464649\",\"qty\":9,\"item_tax_percentage\":\"5%\",\"mrp\":500,\"image\":\"https://images-na.ssl-images-amazon.com/images/I/51UBQPZAiVL._SX425_.jpg\",\"amount\":null,\"net_amount\":null,\"total_weight\":null,\"base_price_list_rate\":0,\"base_rate\":0,\"base_amount\":null,\"base_net_rate\":0,\"base_net_amount\":null,\"total_amount\":25000,\"enter_qty\":\"50\",\"child_docname\":\"New Item Quotation 3\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[]},{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 4\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":3,\"item_code\":\"CK Ware 001\",\"item_name\":\"cookware\",\"hsn_code\":\"6464649\",\"qty\":9,\"item_tax_percentage\":\"5%\",\"mrp\":65,\"image\":\"https://images-na.ssl-images-amazon.com/images/I/51UBQPZAiVL._SX425_.jpg\",\"amount\":null,\"net_amount\":null,\"total_weight\":null,\"base_price_list_rate\":0,\"base_rate\":0,\"base_amount\":null,\"base_net_rate\":0,\"base_net_amount\":null,\"total_amount\":2925,\"enter_qty\":\"45\",\"child_docname\":\"New Item Quotation 4\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[]}],\"total_net_weight\":0,\"party_name\":\"Prasanna\",\"customer_address\":\"Prasanna-Billing\",\"address_display\":\"1-19-158<br>Near Test<br>Vizag<br>\\nAndhra pradesh<br>535005<br>India<br>\\nPhone: 9876542<br>GST State Number : 37<br>Fax: 7979<br>Email: web@f9tech.com<br>\",\"shipping_address_name\":\"\",\"shipping_address\":null,\"contact_person\":\"Prasanna-Prasanna\",\"contact_display\":\"Prasanna\",\"contact_email\":\"web@f9tech.com\",\"contact_mobile\":\"9876543210\",\"customer_name\":\"Prasanna\",\"language\":\"en\",\"tax_category\":\"GST\",\"taxes_and_charges\":null,\"payment_terms_template\":null}"
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/desk/form/save.py", line 21, in savedocs
    doc.save()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 273, in save
    return self._save(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 296, in _save
    self.insert()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 230, in insert
    self.run_before_save_methods()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 896, in run_before_save_methods
    self.run_method("validate")
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 797, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1073, in composer
    return composed(self, method, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1056, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 791, in <lambda>
    fn = lambda self, *args, **kwargs: getattr(self, method)(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 26, in validate
    super(Quotation, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/selling_controller.py", line 40, in validate
    super(SellingController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/stock_controller.py", line 21, in validate
    super(StockController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 80, in validate
    self.calculate_taxes_and_totals()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 189, in calculate_taxes_and_totals
    calculate_taxes_and_totals(self)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 17, in __init__
    self.calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 24, in calculate
    self._calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 38, in _calculate
    self.calculate_item_values()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 101, in calculate_item_values
    if not item.rate or (item.pricing_rules and item.discount_percentage > 0):
AttributeError: 'ItemQuotation' object has no attribute 'pricing_rules'
[ERROR] 2021-03-09 15:18:43,928 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "action": "Save",
 "cmd": "frappe.desk.form.save.savedocs",
 "doc": "{\"docstatus\":0,\"doctype\":\"Quotation\",\"name\":\"New Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"naming_series\":\"SAL-QTN-.YYYY.-\",\"quotation_to\":\"Customer\",\"transaction_date\":\"2021-03-11\",\"order_type\":\"Sales\",\"customer_group\":\"All Customer Groups\",\"territory\":\"All Territories\",\"currency\":\"INR\",\"selling_price_list\":\"Indian Rupees\",\"price_list_currency\":\"INR\",\"ignore_pricing_rule\":0,\"apply_discount_on\":\"Grand Total\",\"group_same_items\":0,\"status\":\"Draft\",\"conversion_rate\":1,\"plc_conversion_rate\":1,\"company\":\"BGL Stores\",\"valid_till\":\"2021-04-11\",\"base_net_total\":27000,\"net_total\":27000,\"base_total\":27000,\"total\":27000,\"total_qty\":5,\"rounding_adjustment\":0,\"grand_total\":27000,\"base_grand_total\":27000,\"total_taxes_and_charges\":0,\"base_total_taxes_and_charges\":0,\"base_rounding_adjustment\":0,\"rounded_total\":27000,\"base_rounded_total\":27000,\"in_words\":\"\",\"base_in_words\":\"\",\"base_discount_amount\":0,\"item_details\":\"sam001\",\"items\":[{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":1,\"item_code\":\"sam001\",\"item_name\":\"sample\",\"hsn_code\":\"446\",\"qty\":5,\"item_tax_percentage\":\"5%\",\"mrp\":5400,\"image\":\"/files/jos png.png\",\"price_list_rate\":5400,\"child_docname\":\"New Item Quotation 1\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[],\"discount_amount\":0,\"net_rate\":5400,\"amount\":27000,\"net_amount\":27000,\"total_weight\":null,\"base_price_list_rate\":5400,\"base_rate\":5400,\"base_amount\":27000,\"base_net_rate\":5400,\"base_net_amount\":27000,\"discount_percentage\":0,\"rate_with_margin\":5400,\"base_rate_with_margin\":5400,\"rate\":5400}],\"party_name\":\"Prasanna\",\"customer_address\":\"Prasanna-Billing\",\"address_display\":\"1-19-158<br>Near Test<br>Vizag<br>\\nAndhra pradesh<br>535005<br>India<br>\\nPhone: 9876542<br>GST State Number : 37<br>Fax: 7979<br>Email: web@f9tech.com<br>\",\"shipping_address_name\":\"\",\"shipping_address\":null,\"contact_person\":\"Prasanna-Prasanna\",\"contact_display\":\"Prasanna\",\"contact_email\":\"web@f9tech.com\",\"contact_mobile\":\"9876543210\",\"customer_name\":\"Prasanna\",\"language\":\"en\",\"tax_category\":\"GST\",\"taxes_and_charges\":null,\"payment_terms_template\":null}"
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/desk/form/save.py", line 21, in savedocs
    doc.save()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 273, in save
    return self._save(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 296, in _save
    self.insert()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 230, in insert
    self.run_before_save_methods()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 896, in run_before_save_methods
    self.run_method("validate")
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 797, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1073, in composer
    return composed(self, method, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1056, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 791, in <lambda>
    fn = lambda self, *args, **kwargs: getattr(self, method)(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 26, in validate
    super(Quotation, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/selling_controller.py", line 40, in validate
    super(SellingController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/stock_controller.py", line 21, in validate
    super(StockController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 80, in validate
    self.calculate_taxes_and_totals()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 189, in calculate_taxes_and_totals
    calculate_taxes_and_totals(self)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 17, in __init__
    self.calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 24, in calculate
    self._calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 38, in _calculate
    self.calculate_item_values()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 123, in calculate_item_values
    item.amount = flt(item.rate * item.qty,	item.precision("amount"))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/base_document.py", line 732, in precision
    if df.fieldtype in ("Currency", "Float", "Percent"):
AttributeError: 'NoneType' object has no attribute 'fieldtype'
[ERROR] 2021-03-09 15:20:57,429 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "action": "Save",
 "cmd": "frappe.desk.form.save.savedocs",
 "doc": "{\"docstatus\":0,\"doctype\":\"Quotation\",\"name\":\"New Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"naming_series\":\"SAL-QTN-.YYYY.-\",\"quotation_to\":\"Customer\",\"transaction_date\":\"2021-03-11\",\"order_type\":\"Sales\",\"customer_group\":\"All Customer Groups\",\"territory\":\"All Territories\",\"currency\":\"INR\",\"selling_price_list\":\"Indian Rupees\",\"price_list_currency\":\"INR\",\"ignore_pricing_rule\":0,\"apply_discount_on\":\"Grand Total\",\"group_same_items\":0,\"status\":\"Draft\",\"conversion_rate\":1,\"plc_conversion_rate\":1,\"company\":\"BGL Stores\",\"valid_till\":\"2021-04-11\",\"base_net_total\":27000,\"net_total\":27000,\"base_total\":27000,\"total\":27000,\"total_qty\":5,\"rounding_adjustment\":0,\"grand_total\":27000,\"base_grand_total\":27000,\"total_taxes_and_charges\":0,\"base_total_taxes_and_charges\":0,\"base_rounding_adjustment\":0,\"rounded_total\":27000,\"base_rounded_total\":27000,\"in_words\":\"\",\"base_in_words\":\"\",\"base_discount_amount\":0,\"item_details\":\"sam001\",\"items\":[{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":1,\"item_code\":\"sam001\",\"item_name\":\"sample\",\"hsn_code\":\"446\",\"qty\":5,\"item_tax_percentage\":\"5%\",\"mrp\":5400,\"image\":\"/files/jos png.png\",\"enter_qty\":\"5\",\"total_amount\":27000,\"price_list_rate\":5400,\"child_docname\":\"New Item Quotation 1\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[],\"discount_amount\":0,\"net_rate\":5400,\"amount\":27000,\"net_amount\":27000,\"total_weight\":null,\"base_price_list_rate\":5400,\"base_rate\":5400,\"base_amount\":27000,\"base_net_rate\":5400,\"base_net_amount\":27000,\"discount_percentage\":0,\"rate_with_margin\":5400,\"base_rate_with_margin\":5400,\"rate\":5400}],\"party_name\":\"Prasanna\",\"customer_address\":\"Prasanna-Billing\",\"address_display\":\"1-19-158<br>Near Test<br>Vizag<br>\\nAndhra pradesh<br>535005<br>India<br>\\nPhone: 9876542<br>GST State Number : 37<br>Fax: 7979<br>Email: web@f9tech.com<br>\",\"shipping_address_name\":\"\",\"shipping_address\":null,\"contact_person\":\"Prasanna-Prasanna\",\"contact_display\":\"Prasanna\",\"contact_email\":\"web@f9tech.com\",\"contact_mobile\":\"9876543210\",\"customer_name\":\"Prasanna\",\"language\":\"en\",\"tax_category\":\"GST\",\"taxes_and_charges\":null,\"payment_terms_template\":null}"
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/desk/form/save.py", line 21, in savedocs
    doc.save()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 273, in save
    return self._save(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 296, in _save
    self.insert()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 230, in insert
    self.run_before_save_methods()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 896, in run_before_save_methods
    self.run_method("validate")
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 797, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1073, in composer
    return composed(self, method, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1056, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 791, in <lambda>
    fn = lambda self, *args, **kwargs: getattr(self, method)(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 26, in validate
    super(Quotation, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/selling_controller.py", line 40, in validate
    super(SellingController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/stock_controller.py", line 21, in validate
    super(StockController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 80, in validate
    self.calculate_taxes_and_totals()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 189, in calculate_taxes_and_totals
    calculate_taxes_and_totals(self)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 17, in __init__
    self.calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 24, in calculate
    self._calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 38, in _calculate
    self.calculate_item_values()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 123, in calculate_item_values
    item.amount = flt(item.rate * item.qty,	item.precision("amount"))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/base_document.py", line 732, in precision
    if df.fieldtype in ("Currency", "Float", "Percent"):
AttributeError: 'NoneType' object has no attribute 'fieldtype'
[ERROR] 2021-03-09 15:45:48,098 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "cmd": "frappe.model.rename_doc.update_document_title",
 "docname": "Item Quotation",
 "doctype": "DocType",
 "merge": "0",
 "new_name": "BGL Quotation Item",
 "title_field": ""
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/rename_doc.py", line 20, in update_document_title
    docname = rename_doc(doctype=doctype, old=docname, new=new_name, merge=merge)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/rename_doc.py", line 64, in rename_doc
    rename_dynamic_links(doctype, old, new)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/rename_doc.py", line 408, in rename_dynamic_links
    for df in get_dynamic_link_map().get(doctype, []):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/dynamic_links.py", line 45, in get_dynamic_link_map
    links = frappe.db.sql_list("""select distinct {options} from `tab{parent}`""".format(**df))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 236, in sql_list
    return [r[0] for r in self.sql(query, values, debug=debug)]
  File "/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 171, in sql
    self._cursor.execute(query)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/cursors.py", line 170, in execute
    result = self._query(query)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/cursors.py", line 328, in _query
    conn.query(q)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/connections.py", line 517, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/connections.py", line 732, in _read_query_result
    result.read()
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/connections.py", line 1075, in read
    first_packet = self.connection._read_packet()
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/connections.py", line 684, in _read_packet
    packet.check_error()
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/protocol.py", line 220, in check_error
    err.raise_mysql_exception(self._data)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/err.py", line 109, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table '_1bd3e0294da19198.tabBGL Quotation Item' doesn't exist")
[ERROR] 2021-03-09 15:48:18,447 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "cmd": "frappe.model.rename_doc.update_document_title",
 "docname": "Item Quotation",
 "doctype": "DocType",
 "merge": "0",
 "new_name": "BGL Quotation Item",
 "title_field": ""
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/rename_doc.py", line 20, in update_document_title
    docname = rename_doc(doctype=doctype, old=docname, new=new_name, merge=merge)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/rename_doc.py", line 64, in rename_doc
    rename_dynamic_links(doctype, old, new)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/rename_doc.py", line 408, in rename_dynamic_links
    for df in get_dynamic_link_map().get(doctype, []):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/dynamic_links.py", line 45, in get_dynamic_link_map
    links = frappe.db.sql_list("""select distinct {options} from `tab{parent}`""".format(**df))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 236, in sql_list
    return [r[0] for r in self.sql(query, values, debug=debug)]
  File "/home/frappe/frappe-bench/apps/frappe/frappe/database/database.py", line 171, in sql
    self._cursor.execute(query)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/cursors.py", line 170, in execute
    result = self._query(query)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/cursors.py", line 328, in _query
    conn.query(q)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/connections.py", line 517, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/connections.py", line 732, in _read_query_result
    result.read()
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/connections.py", line 1075, in read
    first_packet = self.connection._read_packet()
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/connections.py", line 684, in _read_packet
    packet.check_error()
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/protocol.py", line 220, in check_error
    err.raise_mysql_exception(self._data)
  File "/home/frappe/frappe-bench/env/lib/python3.6/site-packages/pymysql/err.py", line 109, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table '_1bd3e0294da19198.tabBGL Quotation Item' doesn't exist")
[ERROR] 2021-03-09 15:52:56,431 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "action": "Save",
 "cmd": "frappe.desk.form.save.savedocs",
 "doc": "{\"docstatus\":0,\"doctype\":\"Quotation\",\"name\":\"New Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"naming_series\":\"SAL-QTN-.YYYY.-\",\"quotation_to\":\"Customer\",\"transaction_date\":\"2021-03-11\",\"order_type\":\"Sales\",\"customer_group\":\"All Customer Groups\",\"territory\":\"All Territories\",\"currency\":\"INR\",\"selling_price_list\":\"Indian Rupees\",\"price_list_currency\":\"INR\",\"ignore_pricing_rule\":0,\"apply_discount_on\":\"Grand Total\",\"group_same_items\":0,\"status\":\"Draft\",\"conversion_rate\":1,\"plc_conversion_rate\":1,\"company\":\"BGL Stores\",\"valid_till\":\"2021-04-11\",\"base_net_total\":27000,\"net_total\":27000,\"base_total\":27000,\"total\":27000,\"total_qty\":5,\"rounding_adjustment\":0,\"grand_total\":27000,\"base_grand_total\":27000,\"total_taxes_and_charges\":0,\"base_total_taxes_and_charges\":0,\"base_rounding_adjustment\":0,\"rounded_total\":27000,\"base_rounded_total\":27000,\"in_words\":\"\",\"base_in_words\":\"\",\"base_discount_amount\":0,\"item_details\":\"sam001\",\"items\":[{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"is_free_item\":0,\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":1,\"item_code\":\"sam001\",\"item_name\":\"sample\",\"hsn_code\":\"446\",\"qty\":5,\"item_tax_percentage\":\"5%\",\"mrp\":5400,\"image\":\"/files/jos png.png\",\"price_list_rate\":5400,\"child_docname\":\"New Item Quotation 1\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[],\"conversion_factor\":0,\"stock_qty\":0,\"base_price_list_rate\":5400,\"margin_rate_or_amount\":0,\"rate_with_margin\":5400,\"discount_amount\":0,\"base_rate_with_margin\":5400,\"rate\":5400,\"net_rate\":5400,\"amount\":27000,\"net_amount\":27000,\"base_rate\":5400,\"base_net_rate\":5400,\"base_amount\":27000,\"base_net_amount\":27000,\"weight_per_unit\":0,\"total_weight\":0,\"discount_percentage\":0}],\"party_name\":\"Prasanna\",\"customer_address\":\"Prasanna-Billing\",\"address_display\":\"1-19-158<br>Near Test<br>Vizag<br>\\nAndhra pradesh<br>535005<br>India<br>\\nPhone: 9876542<br>GST State Number : 37<br>Fax: 7979<br>Email: web@f9tech.com<br>\",\"shipping_address_name\":\"\",\"shipping_address\":null,\"contact_person\":\"Prasanna-Prasanna\",\"contact_display\":\"Prasanna\",\"contact_email\":\"web@f9tech.com\",\"contact_mobile\":\"9876543210\",\"customer_name\":\"Prasanna\",\"language\":\"en\",\"tax_category\":\"GST\",\"taxes_and_charges\":null,\"payment_terms_template\":null}"
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/desk/form/save.py", line 21, in savedocs
    doc.save()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 273, in save
    return self._save(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 296, in _save
    self.insert()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 230, in insert
    self.run_before_save_methods()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 896, in run_before_save_methods
    self.run_method("validate")
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 797, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1073, in composer
    return composed(self, method, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1056, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 791, in <lambda>
    fn = lambda self, *args, **kwargs: getattr(self, method)(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 26, in validate
    super(Quotation, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/selling_controller.py", line 40, in validate
    super(SellingController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/stock_controller.py", line 21, in validate
    super(StockController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 80, in validate
    self.calculate_taxes_and_totals()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 189, in calculate_taxes_and_totals
    calculate_taxes_and_totals(self)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 17, in __init__
    self.calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 24, in calculate
    self._calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 43, in _calculate
    self.calculate_taxes()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 250, in calculate_taxes
    item_tax_map = self._load_item_tax_rate(item.item_tax_rate)
AttributeError: 'ItemQuotation' object has no attribute 'item_tax_rate'
[ERROR] 2021-03-09 15:55:09,163 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "action": "Save",
 "cmd": "frappe.desk.form.save.savedocs",
 "doc": "{\"docstatus\":0,\"doctype\":\"Quotation\",\"name\":\"New Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"naming_series\":\"SAL-QTN-.YYYY.-\",\"quotation_to\":\"Customer\",\"transaction_date\":\"2021-03-11\",\"order_type\":\"Sales\",\"customer_group\":\"All Customer Groups\",\"territory\":\"All Territories\",\"currency\":\"INR\",\"selling_price_list\":\"Indian Rupees\",\"price_list_currency\":\"INR\",\"ignore_pricing_rule\":0,\"apply_discount_on\":\"Grand Total\",\"group_same_items\":0,\"status\":\"Draft\",\"conversion_rate\":1,\"plc_conversion_rate\":1,\"company\":\"BGL Stores\",\"valid_till\":\"2021-04-11\",\"base_net_total\":33500,\"net_total\":33500,\"base_total\":33500,\"total\":33500,\"total_qty\":6,\"rounding_adjustment\":0,\"grand_total\":33500,\"base_grand_total\":33500,\"total_taxes_and_charges\":0,\"base_total_taxes_and_charges\":0,\"base_rounding_adjustment\":0,\"rounded_total\":33500,\"base_rounded_total\":33500,\"in_words\":\"\",\"base_in_words\":\"\",\"base_discount_amount\":0,\"item_details\":\"sam001\",\"items\":[{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"is_free_item\":0,\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":1,\"item_code\":\"sam001\",\"item_name\":\"sample\",\"hsn_code\":\"446\",\"qty\":5,\"item_tax_percentage\":\"5%\",\"mrp\":5400,\"image\":\"/files/jos png.png\",\"price_list_rate\":5400,\"child_docname\":\"New Item Quotation 1\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[],\"conversion_factor\":0,\"stock_qty\":0,\"base_price_list_rate\":5400,\"margin_rate_or_amount\":0,\"rate_with_margin\":5400,\"discount_amount\":0,\"base_rate_with_margin\":5400,\"rate\":5400,\"net_rate\":5400,\"amount\":27000,\"net_amount\":27000,\"base_rate\":5400,\"base_net_rate\":5400,\"base_amount\":27000,\"base_net_amount\":27000,\"total_weight\":null,\"discount_percentage\":0,\"enter_qty\":\"50\",\"total_amount\":270000},{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 2\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"is_free_item\":0,\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":2,\"__unedited\":false,\"item_code\":\"CK Ware\",\"barcode\":null,\"item_name\":\"Cook ware\",\"description\":\"<div><strong>Lorem Ipsum</strong>\u00a0is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled\u00a0</div>\",\"image\":\"/files/cooker.jpg\",\"warehouse\":\"Stores - BS\",\"income_account\":null,\"expense_account\":null,\"cost_center\":null,\"has_serial_no\":1,\"has_batch_no\":0,\"batch_no\":null,\"uom\":\"Box\",\"min_order_qty\":\"\",\"qty\":1,\"stock_qty\":1,\"price_list_rate\":6500,\"base_price_list_rate\":6500,\"rate\":6500,\"base_rate\":6500,\"amount\":6500,\"base_amount\":6500,\"net_rate\":6500,\"net_amount\":6500,\"discount_percentage\":0,\"supplier\":null,\"update_stock\":0,\"delivered_by_supplier\":0,\"is_fixed_asset\":0,\"weight_per_unit\":65,\"weight_uom\":\"\",\"last_purchase_rate\":0,\"transaction_date\":\"2021-03-11\",\"conversion_factor\":1,\"item_group\":\"All Item Groups\",\"barcodes\":[],\"brand\":\"Pigeon\",\"stock_uom\":\"Box\",\"manufacturer\":null,\"manufacturer_part_no\":null,\"item_tax_rate\":\"{}\",\"customer_item_code\":\"100\",\"valuation_rate\":0,\"projected_qty\":1,\"actual_qty\":0,\"reserved_qty\":0,\"child_docname\":\"New Item Quotation 2\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[],\"rate_with_margin\":6500,\"base_rate_with_margin\":6500,\"mrp\":50,\"margin_rate_or_amount\":0,\"discount_amount\":0,\"base_net_rate\":6500,\"base_net_amount\":6500,\"total_weight\":65,\"total_amount\":250,\"enter_qty\":\"5\"}],\"party_name\":\"Prasanna\",\"customer_address\":\"Prasanna-Billing\",\"address_display\":\"1-19-158<br>Near Test<br>Vizag<br>\\nAndhra pradesh<br>535005<br>India<br>\\nPhone: 9876542<br>GST State Number : 37<br>Fax: 7979<br>Email: web@f9tech.com<br>\",\"shipping_address_name\":\"\",\"shipping_address\":null,\"contact_person\":\"Prasanna-Prasanna\",\"contact_display\":\"Prasanna\",\"contact_email\":\"web@f9tech.com\",\"contact_mobile\":\"9876543210\",\"customer_name\":\"Prasanna\",\"language\":\"en\",\"tax_category\":\"GST\",\"taxes_and_charges\":null,\"payment_terms_template\":null,\"total_net_weight\":null}"
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/desk/form/save.py", line 21, in savedocs
    doc.save()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 273, in save
    return self._save(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 296, in _save
    self.insert()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 230, in insert
    self.run_before_save_methods()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 896, in run_before_save_methods
    self.run_method("validate")
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 797, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1073, in composer
    return composed(self, method, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1056, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 791, in <lambda>
    fn = lambda self, *args, **kwargs: getattr(self, method)(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 28, in validate
    self.update_opportunity()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 54, in update_opportunity
    for opportunity in list(set([d.prevdoc_docname for d in self.get("items")])):
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 54, in <listcomp>
    for opportunity in list(set([d.prevdoc_docname for d in self.get("items")])):
AttributeError: 'ItemQuotation' object has no attribute 'prevdoc_docname'
[ERROR] 2021-03-09 15:59:21,959 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "action": "Save",
 "cmd": "frappe.desk.form.save.savedocs",
 "doc": "{\"docstatus\":0,\"doctype\":\"Quotation\",\"name\":\"New Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"naming_series\":\"SAL-QTN-.YYYY.-\",\"quotation_to\":\"Customer\",\"transaction_date\":\"2021-03-11\",\"order_type\":\"Sales\",\"customer_group\":\"All Customer Groups\",\"territory\":\"All Territories\",\"currency\":\"INR\",\"selling_price_list\":\"Indian Rupees\",\"price_list_currency\":\"INR\",\"ignore_pricing_rule\":0,\"apply_discount_on\":\"Grand Total\",\"group_same_items\":0,\"status\":\"Draft\",\"conversion_rate\":1,\"plc_conversion_rate\":1,\"company\":\"BGL Stores\",\"valid_till\":\"2021-04-11\",\"base_net_total\":27000,\"net_total\":27000,\"base_total\":27000,\"total\":27000,\"total_qty\":5,\"rounding_adjustment\":0,\"grand_total\":27000,\"base_grand_total\":27000,\"total_taxes_and_charges\":0,\"base_total_taxes_and_charges\":0,\"base_rounding_adjustment\":0,\"rounded_total\":27000,\"base_rounded_total\":27000,\"in_words\":\"\",\"base_in_words\":\"\",\"base_discount_amount\":0,\"item_details\":\"sam001\",\"items\":[{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":1,\"item_code\":\"sam001\",\"item_name\":\"sample\",\"hsn_code\":\"446\",\"qty\":5,\"item_tax_percentage\":\"5%\",\"mrp\":5400,\"image\":\"/files/jos png.png\",\"price_list_rate\":5400,\"child_docname\":\"New Item Quotation 1\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[],\"conversion_factor\":0,\"stock_qty\":0,\"base_price_list_rate\":5400,\"margin_rate_or_amount\":0,\"rate_with_margin\":5400,\"discount_amount\":0,\"base_rate_with_margin\":5400,\"rate\":5400,\"net_rate\":5400,\"amount\":27000,\"net_amount\":27000,\"total_weight\":null,\"base_rate\":5400,\"base_amount\":27000,\"base_net_rate\":5400,\"base_net_amount\":27000,\"discount_percentage\":0,\"enter_qty\":\"45\",\"total_amount\":243000}],\"party_name\":\"Prasanna\",\"customer_address\":\"Prasanna-Billing\",\"address_display\":\"1-19-158<br>Near Test<br>Vizag<br>\\nAndhra pradesh<br>535005<br>India<br>\\nPhone: 9876542<br>GST State Number : 37<br>Fax: 7979<br>Email: web@f9tech.com<br>\",\"shipping_address_name\":\"\",\"shipping_address\":null,\"contact_person\":\"Prasanna-Prasanna\",\"contact_display\":\"Prasanna\",\"contact_email\":\"web@f9tech.com\",\"contact_mobile\":\"9876543210\",\"customer_name\":\"Prasanna\",\"language\":\"en\",\"tax_category\":\"GST\",\"taxes_and_charges\":null,\"payment_terms_template\":null}"
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/desk/form/save.py", line 21, in savedocs
    doc.save()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 273, in save
    return self._save(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 296, in _save
    self.insert()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 230, in insert
    self.run_before_save_methods()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 896, in run_before_save_methods
    self.run_method("validate")
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 797, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1073, in composer
    return composed(self, method, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1056, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 791, in <lambda>
    fn = lambda self, *args, **kwargs: getattr(self, method)(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 26, in validate
    super(Quotation, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/selling_controller.py", line 40, in validate
    super(SellingController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/stock_controller.py", line 21, in validate
    super(StockController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 80, in validate
    self.calculate_taxes_and_totals()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 189, in calculate_taxes_and_totals
    calculate_taxes_and_totals(self)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 17, in __init__
    self.calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 24, in calculate
    self._calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 38, in _calculate
    self.calculate_item_values()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 123, in calculate_item_values
    item.amount = flt(item.rate * item.qty,	item.precision("amount"))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/base_document.py", line 732, in precision
    if df.fieldtype in ("Currency", "Float", "Percent"):
AttributeError: 'NoneType' object has no attribute 'fieldtype'
[ERROR] 2021-03-09 16:02:01,329 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "action": "Save",
 "cmd": "frappe.desk.form.save.savedocs",
 "doc": "{\"docstatus\":0,\"doctype\":\"Quotation\",\"name\":\"New Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"naming_series\":\"SAL-QTN-.YYYY.-\",\"quotation_to\":\"Customer\",\"transaction_date\":\"2021-03-11\",\"order_type\":\"Sales\",\"customer_group\":\"All Customer Groups\",\"territory\":\"All Territories\",\"currency\":\"INR\",\"selling_price_list\":\"Indian Rupees\",\"price_list_currency\":\"INR\",\"ignore_pricing_rule\":0,\"apply_discount_on\":\"Grand Total\",\"group_same_items\":0,\"status\":\"Draft\",\"conversion_rate\":1,\"plc_conversion_rate\":1,\"company\":\"BGL Stores\",\"valid_till\":\"2021-04-11\",\"base_net_total\":27000,\"net_total\":27000,\"base_total\":27000,\"total\":27000,\"total_qty\":5,\"rounding_adjustment\":0,\"grand_total\":27000,\"base_grand_total\":27000,\"total_taxes_and_charges\":0,\"base_total_taxes_and_charges\":0,\"base_rounding_adjustment\":0,\"rounded_total\":27000,\"base_rounded_total\":27000,\"in_words\":\"\",\"base_in_words\":\"\",\"base_discount_amount\":0,\"item_details\":\"sam001\",\"items\":[{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":1,\"item_code\":\"sam001\",\"item_name\":\"sample\",\"hsn_code\":\"446\",\"qty\":5,\"item_tax_percentage\":\"5%\",\"mrp\":5400,\"image\":\"/files/jos png.png\",\"enter_qty\":\"50\",\"total_amount\":270000,\"price_list_rate\":5400,\"child_docname\":\"New Item Quotation 1\",\"discount_percentage_on_rate\":[],\"discount_amount_on_rate\":[],\"conversion_factor\":0,\"stock_qty\":0,\"base_price_list_rate\":5400,\"margin_rate_or_amount\":0,\"rate_with_margin\":5400,\"discount_amount\":0,\"base_rate_with_margin\":5400,\"rate\":5400,\"net_rate\":5400,\"amount\":27000,\"net_amount\":27000,\"total_weight\":null,\"base_rate\":5400,\"base_amount\":27000,\"base_net_rate\":5400,\"base_net_amount\":27000,\"discount_percentage\":0}],\"party_name\":\"Prasanna\",\"customer_address\":\"Prasanna-Billing\",\"address_display\":\"1-19-158<br>Near Test<br>Vizag<br>\\nAndhra pradesh<br>535005<br>India<br>\\nPhone: 9876542<br>GST State Number : 37<br>Fax: 7979<br>Email: web@f9tech.com<br>\",\"shipping_address_name\":\"\",\"shipping_address\":null,\"contact_person\":\"Prasanna-Prasanna\",\"contact_display\":\"Prasanna\",\"contact_email\":\"web@f9tech.com\",\"contact_mobile\":\"9876543210\",\"customer_name\":\"Prasanna\",\"language\":\"en\",\"tax_category\":\"GST\",\"taxes_and_charges\":null,\"payment_terms_template\":null}"
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/desk/form/save.py", line 21, in savedocs
    doc.save()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 273, in save
    return self._save(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 296, in _save
    self.insert()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 230, in insert
    self.run_before_save_methods()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 896, in run_before_save_methods
    self.run_method("validate")
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 797, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1073, in composer
    return composed(self, method, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1056, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 791, in <lambda>
    fn = lambda self, *args, **kwargs: getattr(self, method)(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 26, in validate
    super(Quotation, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/selling_controller.py", line 40, in validate
    super(SellingController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/stock_controller.py", line 21, in validate
    super(StockController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 80, in validate
    self.calculate_taxes_and_totals()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 189, in calculate_taxes_and_totals
    calculate_taxes_and_totals(self)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 17, in __init__
    self.calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 24, in calculate
    self._calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 38, in _calculate
    self.calculate_item_values()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 123, in calculate_item_values
    item.amount = flt(item.rate * item.qty,	item.precision("amount"))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/base_document.py", line 732, in precision
    if df.fieldtype in ("Currency", "Float", "Percent"):
AttributeError: 'NoneType' object has no attribute 'fieldtype'
[ERROR] 2021-03-09 16:13:19,072 | /home/frappe/frappe-bench/apps/frappe/frappe/app.py:
Site: site1.local
Form Dict: {
 "action": "Save",
 "cmd": "frappe.desk.form.save.savedocs",
 "doc": "{\"docstatus\":0,\"doctype\":\"Quotation\",\"name\":\"New Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"naming_series\":\"SAL-QTN-.YYYY.-\",\"quotation_to\":\"Customer\",\"transaction_date\":\"2021-03-11\",\"order_type\":\"Sales\",\"customer_group\":\"All Customer Groups\",\"territory\":\"All Territories\",\"currency\":\"INR\",\"selling_price_list\":\"Indian Rupees\",\"price_list_currency\":\"INR\",\"ignore_pricing_rule\":0,\"apply_discount_on\":\"Grand Total\",\"group_same_items\":0,\"status\":\"Draft\",\"conversion_rate\":1,\"plc_conversion_rate\":1,\"company\":\"BGL Stores\",\"valid_till\":\"2021-04-11\",\"base_net_total\":null,\"net_total\":null,\"base_total\":null,\"total\":null,\"total_qty\":5,\"rounding_adjustment\":null,\"grand_total\":null,\"base_grand_total\":null,\"total_taxes_and_charges\":null,\"base_total_taxes_and_charges\":null,\"base_rounding_adjustment\":null,\"rounded_total\":null,\"base_rounded_total\":null,\"in_words\":\"\",\"base_in_words\":\"\",\"base_discount_amount\":0,\"party_name\":\"Prasanna\",\"customer_address\":\"Prasanna-Billing\",\"address_display\":\"1-19-158<br>Near Test<br>Vizag<br>\\nAndhra pradesh<br>535005<br>India<br>\\nPhone: 9876542<br>GST State Number : 37<br>Fax: 7979<br>Email: web@f9tech.com<br>\",\"shipping_address_name\":\"\",\"shipping_address\":null,\"contact_person\":\"Prasanna-Prasanna\",\"contact_display\":\"Prasanna\",\"contact_email\":\"web@f9tech.com\",\"contact_mobile\":\"9876543210\",\"customer_name\":\"Prasanna\",\"language\":\"en\",\"tax_category\":\"GST\",\"taxes_and_charges\":null,\"payment_terms_template\":null,\"item_details\":\"sam001\",\"items\":[{\"docstatus\":0,\"doctype\":\"Item Quotation\",\"name\":\"New Item Quotation 1\",\"__islocal\":1,\"__unsaved\":1,\"owner\":\"Administrator\",\"is_free_item\":0,\"parent\":\"New Quotation 1\",\"parentfield\":\"items\",\"parenttype\":\"Quotation\",\"idx\":1,\"item_code\":\"sam001\",\"item_name\":\"sample\",\"hsn_code\":\"446\",\"qty\":5,\"item_tax_percentage\":\"5%\",\"mrp\":5400,\"image\":\"/files/jos png.png\",\"enter_qty\":\"50\",\"total_amount\":270000,\"conversion_factor\":0,\"stock_qty\":0,\"price_list_rate\":0,\"base_price_list_rate\":0,\"margin_rate_or_amount\":0,\"rate_with_margin\":0,\"discount_amount\":0,\"base_rate_with_margin\":0,\"base_rate\":0,\"base_net_rate\":0,\"base_amount\":null,\"base_net_amount\":null,\"amount\":null,\"net_amount\":null,\"total_weight\":null}]}"
}
Request Error
Traceback (most recent call last):
  File "/home/frappe/frappe-bench/apps/frappe/frappe/app.py", line 67, in application
    response = frappe.api.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/api.py", line 59, in handle
    return frappe.handler.handle()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 24, in handle
    data = execute_cmd(cmd)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/handler.py", line 64, in execute_cmd
    return frappe.call(method, **frappe.form_dict)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/__init__.py", line 1071, in call
    return fn(*args, **newargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/desk/form/save.py", line 21, in savedocs
    doc.save()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 273, in save
    return self._save(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 296, in _save
    self.insert()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 230, in insert
    self.run_before_save_methods()
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 896, in run_before_save_methods
    self.run_method("validate")
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 797, in run_method
    out = Document.hook(fn)(self, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1073, in composer
    return composed(self, method, *args, **kwargs)
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 1056, in runner
    add_to_return_value(self, fn(self, *args, **kwargs))
  File "/home/frappe/frappe-bench/apps/frappe/frappe/model/document.py", line 791, in <lambda>
    fn = lambda self, *args, **kwargs: getattr(self, method)(*args, **kwargs)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/selling/doctype/quotation/quotation.py", line 26, in validate
    super(Quotation, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/selling_controller.py", line 40, in validate
    super(SellingController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/stock_controller.py", line 21, in validate
    super(StockController, self).validate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 80, in validate
    self.calculate_taxes_and_totals()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/accounts_controller.py", line 189, in calculate_taxes_and_totals
    calculate_taxes_and_totals(self)
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 17, in __init__
    self.calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 24, in calculate
    self._calculate()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 38, in _calculate
    self.calculate_item_values()
  File "/home/frappe/frappe-bench/apps/erpnext/erpnext/controllers/taxes_and_totals.py", line 118, in calculate_item_values
    item.net_rate = item.rate
AttributeError: 'ItemQuotation' object has no attribute 'rate'
